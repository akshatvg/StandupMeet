(window["webpackJsonpopenlive-web"]=window["webpackJsonpopenlive-web"]||[]).push([[0],{102:function(e,t,a){e.exports=a(118)},107:function(e,t,a){},108:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(11),r=a.n(c),i=(a(107),a(108),a(13)),l=a(38),s=a(7),u=a(16),m={loading:!1,streams:[],localStream:null,currentStream:null,otherStreams:[],devicesList:[],config:Object(s.a)(Object(s.a)({uid:0,host:!0,channelName:"",userName:"",token:Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_AGORA_APP_ID:"8e042b2a60154d2aba50d2efd385fdff",REACT_APP_AGORA_LOG:"true"}).REACT_APP_AGORA_APP_TOKEN,resolution:"480p"},function(){try{return JSON.parse(window.sessionStorage.getItem("custom_storage"))}catch(e){return{}}}()),{},{microphoneId:"",cameraId:""}),agoraClient:null,mode:"live",codec:"vp8",muteVideo:!0,muteAudio:!0,screen:!1,profile:!1},d=function(e,t){switch(t.type){case"config":return Object(s.a)(Object(s.a)({},e),{},{config:t.payload});case"client":return Object(s.a)(Object(s.a)({},e),{},{client:t.payload});case"loading":return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload});case"codec":return Object(s.a)(Object(s.a)({},e),{},{codec:t.payload});case"video":return Object(s.a)(Object(s.a)({},e),{},{muteVideo:t.payload});case"audio":return Object(s.a)(Object(s.a)({},e),{},{muteAudio:t.payload});case"screen":return Object(s.a)(Object(s.a)({},e),{},{screen:t.payload});case"devicesList":return Object(s.a)(Object(s.a)({},e),{},{devicesList:t.payload});case"localStream":return Object(s.a)(Object(s.a)({},e),{},{localStream:t.payload});case"profile":return Object(s.a)(Object(s.a)({},e),{},{profile:t.payload});case"currentStream":var a=e.streams,n=t.payload,o=a.filter((function(e){return e.getId()!==n.getId()}));return console.log(e,n,o),Object(s.a)(Object(s.a)({},e),{},{currentStream:n,otherStreams:o});case"addStream":var c=e.streams,r=e.currentStream,i=t.payload,u=r;if(u||(u=i),4===c.length)return Object(s.a)({},e);var m=[].concat(Object(l.a)(c),[i]),d=m.filter((function(e){return e.getId()!==u.getId()}));return Object(s.a)(Object(s.a)({},e),{},{streams:m,currentStream:u,otherStreams:d});case"removeStream":var f=e.streams,p=e.currentStream,h=t.stream,g=t.uid,v=h?h.getId():g,b=p,y=f.filter((function(e){return e.getId()!==v}));p&&v===p.getId()&&(b=0===y.length?null:y[0]);var S=b?y.filter((function(e){return e.getId()!==b.getId()})):[];return Object(s.a)(Object(s.a)({},e),{},{streams:y,currentStream:b,otherStreams:S});case"clearAllStream":var E=e.streams,x=e.localStream,j=e.currentStream;return E.forEach((function(e){e.isPlaying()&&e.stop()})),x&&(x.isPlaying()&&x.stop(),x.close()),j&&(j.isPlaying()&&j.stop(),j.close()),Object(s.a)(Object(s.a)({},e),{},{currentStream:null,localStream:null,streams:[]});default:throw new Error("mutation type not defined")}},f=a(42),p=a(3),h=a(169),g=a(76),v=a.n(g),b=a(81),y=a.n(b),S=a(82),E=a.n(S),x=a(83),j=a.n(x),O=a(61),C=a(154),k=a(156),N=a(155),_=a(80),I=a.n(_),w=a(153),A={success:v.a,warning:I.a,error:y.a,info:E.a},R=Object(w.a)((function(e){return{success:{backgroundColor:O.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"},customSnackbar:{minWidth:"180px !important",minHeight:"40px !important",background:"rgba(0,0,0,0.7)",boxShadow:"0px 2px 4px 0px rgba(42,62,84,0.24)",borderRadius:"30px",justifyContent:"center",padding:"0 11px"}}}));function P(e){var t=R(),a=M(),c=e.message,r=(e.onClose,e.variant),i=Object(f.a)(e,["message","onClose","variant"]),l=A[r];return Object(n.useEffect)((function(){var e=setTimeout((function(){a.removeTop()}),1e3);return function(){clearTimeout(e)}}),[a]),o.a.createElement(N.a,Object.assign({className:Object(p.a)(t[r],t.customSnackbar),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},"error"===r?o.a.createElement("i",{className:"error-icon"}):o.a.createElement(l,{className:Object(p.a)(t.icon,t.iconVariant)}),c),action:[o.a.createElement(k.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){a.removeTop()}},o.a.createElement(j.a,{className:Object(p.a)(t.icon)}))]},i))}function D(e){var t=function(e){};return o.a.createElement(o.a.Fragment,null,e.toasts.map((function(e,a){return o.a.createElement(h.a,{key:a,open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement(P,{onClose:t,variant:e.variant,message:"".concat(e.message)}))})))}var T=a(157),L=Object(w.a)((function(e){return{progress:{margin:e.spacing(2),color:"#44A2FC"},container:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#666666"}}}));function F(){var e=L();return o.a.createElement("div",{className:e.container},o.a.createElement(T.a,{className:e.progress}))}var V=Object(n.createContext)({}),B=Object(n.createContext)({}),z=function(e){var t=e.children,a=Object(n.useReducer)(d,m),c=Object(u.a)(a,2),r=c[0],i=c[1];window.rootState=r;var f=Object(n.useState)([]),p=Object(u.a)(f,2),h=p[0],g=p[1],v={startLoading:function(){i({type:"loading",payload:!0})},stopLoading:function(){i({type:"loading",payload:!1})},updateConfig:function(e){i({type:"config",payload:Object(s.a)(Object(s.a)({},r.config),e)})},setClient:function(e){i({type:"client",payload:e})},setCodec:function(e){i({type:"codec",payload:e})},setVideo:function(e){i({type:"video",payload:e})},setAudio:function(e){i({type:"audio",payload:e})},setScreen:function(e){i({type:"screen",payload:e})},setProfile:function(e){i({type:"profile",payload:e})},toastSuccess:function(e){g([].concat(Object(l.a)(h),[{variant:"success",message:e}]))},toastInfo:function(e){g([].concat(Object(l.a)(h),[{variant:"info",message:e}]))},toastError:function(e){g([].concat(Object(l.a)(h),[{variant:"error",message:e}]))},removeTop:function(){var e=h.filter((function(e,t){return t>0}));g(Object(l.a)(e))},setLocalStream:function(e){i({type:"localStream",payload:e})},setCurrentStream:function(e){i({type:"currentStream",payload:e})},setDevicesList:function(e){i({type:"devicesList",payload:e})},clearAllStream:function(){i({type:"clearAllStream"})},addLocal:function(e){var t=e.stream;v.setLocalStream(t),v.setCurrentStream(t)},addStream:function(e){var t=e.stream;i({type:"addStream",payload:t})},removeStream:function(e){var t=e.stream;i({type:"removeStream",stream:t})},removeStreamById:function(e){var t=e.uid;i({type:"removeStream",uid:t})},connectionStateChanged:function(e){v.toastInfo("".concat(e.curState))}};return Object(n.useEffect)((function(){window.sessionStorage.setItem("custom_storage",JSON.stringify({uid:r.config.uid,host:r.config.host,channelName:r.config.channelName,token:r.config.token,resolution:r.config.resolution}))}),[r]),o.a.createElement(V.Provider,{value:r},o.a.createElement(B.Provider,{value:v},o.a.createElement(D,{toasts:h}),r.loading?o.a.createElement(F,null):null,t))};function W(){return Object(n.useContext)(V)}function M(){return Object(n.useContext)(B)}var $=a(163),H=a(166),U=a(162),J=a(4),G=a(158),q=a(170),Y=a(159),Z=a(160),K=a(28),X=o.a.createContext({}),Q=function(e){var t=e.children;return o.a.createElement(K.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,null,(function(e){return o.a.createElement(X.Provider,{value:e},t)}))))};function ee(){return Object(n.useContext)(X)}var te=a(37),ae=a.n(te),ne=a(121),oe=a(114),ce=Object(J.a)({root:{color:"#999999","&$checked":{color:"#44A2FC"},"&:hover":{backgroundColor:"inherit"}}})((function(e){e.children;var t=Object(f.a)(e,["children"]);return o.a.createElement("div",{className:"role-item ".concat(t.checked?"active":"inactive"),onClick:function(e){t.onClick(t)}},o.a.createElement("div",{className:"icon-".concat(t.value)}),o.a.createElement("div",{className:"radio-row ".concat(t.value)},o.a.createElement("div",{className:"custom-radio"},o.a.createElement("input",{readOnly:!0,type:"radio",value:t.value,checked:t.checked}),o.a.createElement("div",{className:"checkmark"})),o.a.createElement(H.a,{flex:"1",className:"role-name ".concat(t.checked?"active":"inactive")},t.value)))})),re=Object(w.a)((function(e){return{fontStyle:{color:"#9ee2ff",margin:"5px auto"},midItem:{marginTop:"1rem",marginBottom:"6rem"},item:{flex:1,display:"flex",alignItems:"center"},coverLeft:{background:"linear-gradient(to bottom, #307AFF, 50%, #46cdff)",alignItems:"center",flex:1,display:"flex",flexDirection:"column"},coverContent:{display:"flex",justifyContent:"center",flexDirection:"column",color:"#fff"},container:{display:"flex",justifyContent:"center",alignItems:"center"},card:{display:"flex",minWidth:700,minHeight:500,maxHeight:500,borderRadius:"10px",boxShadow:"0px 6px 18px 0px rgba(0,0,0,0.2)"},input:{maxWidth:"250px",minWidth:"250px",alignSelf:"center"},button:{lineHeight:"21px",color:"rgba(255,255,255,1)",fontSize:"17px",textTransform:"none",height:"44px",width:"260px","&:hover":{backgroundColor:"#82C2FF"},margin:e.spacing(1),marginTop:"33px",backgroundColor:"#44a2fc",borderRadius:"30px"},copyclipbtn:{color:"rgba(255,255,255,1)",fontSize:"17px",textTransform:"none",margin:"30px auto 15px",width:"260px","&:hover":{backgroundColor:"#82C2FF"},backgroundColor:"#44a2fc",borderRadius:"30px",padding:"12px 20px",border:"none"},copyclibtext:{padding:"15px",color:"currentColor",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontSize:"16px"},radio:{padding:"0",fontSize:"14px",alignItems:"center",paddingRight:"5px"}}}));function ie(){var e=re(),t=ee(),a=W(),c=M(),r=Object(n.useState)(""),i=Object(u.a)(r,2),l=i[0],s=i[1],m=Object(n.useState)(oe("A0",10)),d=Object(u.a)(m,2),f=d[0],h=d[1],g=Object(n.useRef)(null);if(window.location.hash.includes("#/?join/"))var v=window.location.hash.split("#/?join/")[1];var b=function(e){var t=e.value;e.checked;console.log("value",e),c.updateConfig({host:"host"===t})};return o.a.createElement(H.a,{flex:"1",display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"column"},o.a.createElement(K.b,{to:"/setting",className:"setting-btn"}),o.a.createElement("div",{className:"role-container host-div"},o.a.createElement(ce,{className:e.radio,value:"host",checked:a.config.host,onClick:b}),o.a.createElement(ce,{className:e.radio,value:"audience",checked:!a.config.host,onClick:b})),o.a.createElement(H.a,{marginTop:"392",flex:"1",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},!window.location.hash.includes("#/?join/")&&o.a.createElement(G.a,{className:Object(p.a)(e.input,e.grid)},o.a.createElement(q.a,{htmlFor:"channelName"},"Meeting Name"),o.a.createElement(Y.a,{id:"channelName",name:"channelName",value:a.config.channelName,onChange:function(e){/^[a-zA-Z0-9!#$%&()+\-:;<=.>?@[\]^_{}|~,\s]{1,64}$/.test(e.target.value)&&e.target.value.length<64?c.updateConfig({channelName:e.target.value}):c.updateConfig({channelName:""})}})),o.a.createElement(G.a,{className:Object(p.a)(e.input,e.grid)},o.a.createElement(q.a,{htmlFor:"userName"},"Enter Your Name"),o.a.createElement(Y.a,{id:"userName",name:"userName",value:a.config.userName,onChange:function(e){/^[a-zA-Z0-9!#$%&()+\-:;<=.>?@[\]^_{}|~,\s]{1,64}$/.test(e.target.value)&&e.target.value.length<64?c.updateConfig({userName:e.target.value,channelName:a.config.channelName?a.config.channelName:v}):c.updateConfig({userName:""})}})),o.a.createElement(G.a,{className:Object(p.a)(e.input,e.grid)},!window.location.hash.includes("#/?join/")&&a.config.channelName&&document.queryCommandSupported("copy")&&o.a.createElement("div",null,o.a.createElement("button",{onClick:function(e){g.current.select(),document.execCommand("copy"),e.target.focus(),s("Link copied!")},variant:"contained",color:"primary",className:e.copyclipbtn},"Copy Meeting Link"),l),!window.location.hash.includes("#/?join/")&&a.config.channelName&&o.a.createElement(ne.a,{className:e.copyclibtext,multiline:!0,rows:2,rowsMax:10,ref:g,name:"copyLink",value:window.location.href+"?join/"+a.config.channelName+"__"+f})),o.a.createElement(G.a,{className:e.grid},o.a.createElement(Z.a,{onClick:function(){if(!a.config.channelName){if(!window.location.hash.includes("#/?join/"))return void c.toastError("You need to enter the meeting name");c.updateConfig({channelName:f}),console.log(a.config.channelName)}if(a.config.userName){if(!l){if(!window.location.hash.includes("#/?join/"))return void c.toastError("Please click on the copy the meeting link");c.updateConfig({channelName:window.location.hash.split("#/?join/")[1]})}if(!window.location.hash.includes("#/?join/")){var e=a.config.channelName+"__"+f;h(e),a.config.channelName=e}c.startLoading(),console.log(a.config.channelName),t.history.push({pathname:"/meeting/".concat(a.config.channelName)})}else c.toastError("Please enter your name to continue.")},variant:"contained",color:"primary",className:e.button},"Join Meeting"))))}var le=a(84),se=a(85),ue=a(86),me=a.n(ue),de=function(){function e(){Object(le.a)(this,e),this._client=null,this._joined=!1,this._localStream=null,this._params={},this._uid=0,this._eventBus=new me.a,this._showProfile=!1,this._subscribed=!1,this._created=!1}return Object(se.a)(e,[{key:"createClient",value:function(e){return this._client=ae.a.createClient({mode:e.mode,codec:e.codec}),this._client}},{key:"closeStream",value:function(){this._localStream.isPlaying()&&this._localStream.stop(),this._localStream.close()}},{key:"destroy",value:function(){this._created=!1,this._client=null}},{key:"on",value:function(e,t){-1===["localStream-added","screenShare-canceled"].indexOf(e)?this._client.on(e,t):this._eventBus.on(e,t)}},{key:"setClientRole",value:function(e){this._client.setClientRole(e)}},{key:"createRTCStream",value:function(e){var t=this;return new Promise((function(a,n){t._uid=t._localStream?t._localStream.getId():e.uid,t._localStream&&(t.unpublish(),t.closeStream());var o=ae.a.createStream({streamID:t._uid,audio:!0,video:!0,screen:!1,microphoneId:e.microphoneId,cameraId:e.cameraId});e.resolution&&"default"!==e.resolution&&o.setVideoProfile(e.resolution),o.init((function(){t._localStream=o,t._eventBus.emit("localStream-added",{stream:t._localStream}),!1===e.muteVideo&&t._localStream.muteVideo(),!1===e.muteAudio&&t._localStream.muteAudio(),a()}),(function(e){n(e),console.error("init local stream failed ",e)}))}))}},{key:"createScreenSharingStream",value:function(e){var t=this;return new Promise((function(a,n){t._uid=t._localStream?t._localStream.getId():e.uid,t._localStream&&(t._uid=t._localStream.getId(),t.unpublish());var o=ae.a.createStream({streamID:t._uid,audio:!0,video:!1,screen:!0,microphoneId:e.microphoneId,cameraId:e.cameraId});e.resolution&&"default"!==e.resolution&&o.setScreenProfile("".concat(e.resolution,"_1")),o.on("stopScreenSharing",(function(e){t._eventBus.emit("stopScreenSharing",e),t.closeStream(),t.unpublish()})),o.init((function(){t.closeStream(),t._localStream=o,t._eventBus.emit("localStream-added",{stream:t._localStream}),a()}),(function(e){t.publish(),n(e)}))}))}},{key:"subscribe",value:function(e,t){this._client.subscribe(e,t)}},{key:"_createTmpStream",value:function(){var e=this;return this._uid=0,new Promise((function(t,a){e._localStream&&e._localStream.close();var n=ae.a.createStream({streamID:e._uid,audio:!0,video:!0,screen:!1});n.init((function(){e._localStream=n,t()}),(function(e){a(e),console.error("init local stream failed ",e)}))}))}},{key:"getDevices",value:function(){var e=this;return new Promise((function(t,a){e._client||e.createClient({codec:"vp8",mode:"live"}),e._createTmpStream().then((function(){ae.a.getDevices((function(a){e._localStream.close(),t(a)}))}))}))}},{key:"setStreamFallbackOption",value:function(e,t){this._client.setStreamFallbackOption(e,t)}},{key:"enableDualStream",value:function(){var e=this;return new Promise((function(t,a){e._client.enableDualStream(t,a)}))}},{key:"setRemoteVideoStreamType",value:function(e,t){this._client.setRemoteVideoStreamType(e,t)}},{key:"join",value:function(e){var t=this;return this._joined="pending",new Promise((function(a,n){t._params=e,console.log(t._params),t._client.init("8e042b2a60154d2aba50d2efd385fdff",(function(){t._client.join(e.token?e.token:null,e.channel,e.userName?e.userName:null,(function(o){t._uid=o,console.log("join channel: "+e.channel+" success, uid: "+o),t._joined=!0,e.uid=o,e.host?t.createRTCStream(e).then((function(){console.log(e),t.enableDualStream().then((function(){t.setRemoteVideoStreamType(t._localStream,0),a(e.uid)})).catch((function(e){n(e)}))})).catch((function(e){n(e)})):a()}),(function(e){t._joined=!1,n(e),console.error("client join failed",e)}))}),(function(e){t._joined=!1,n(e),console.error(e)}))}))}},{key:"publish",value:function(){this._client.publish(this._localStream,(function(e){console.error(e)}))}},{key:"unpublish",value:function(){this._client&&this._client.unpublish(this._localStream,(function(e){console.error(e)}))}},{key:"leave",value:function(){var e=this;return new Promise((function(t){if(!e._client)return t();e._client.leave((function(){e._joined=!1,e.destroy(),t()}),(function(e){console.log("channel leave failed"),console.error(e)}))}))}}]),e}();var fe=a(165),pe=a(173),he=a(172),ge=a(171),ve=Object(w.a)((function(e){return{menuTitle:{color:"#333333",textAlign:"center",fontSize:"h6.fontSize",position:"relative",top:"7px"},marginTop:{marginTop:"0 !important"},menu:{margin:"0.25rem 0",position:"relative",height:"39px",display:"flex",justifyContent:"center",alignItems:"center"},line:{marginTop:"0.2rem",marginBottom:"0.5rem",borderBottom:"1px solid #EAEAEA"},hr:{borderBottom:"1px solid #EAEAEA"},switchItem:{flexDirection:"row-reverse !important",marginLeft:"0 !important",marginRight:"0 !important",justifyContent:"space-between"}}})),be=Object(J.a)((function(e){return{root:{width:42,height:26,padding:2,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#44A2FC",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(f.a)(e,["classes"]);return o.a.createElement(ge.a,Object.assign({focusVisibleClassName:t.focusVisible,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))}));function ye(){var e=ve(),t=W(),a=M(),c=function(){var e=W(),t=M(),a=Object(n.useMemo)((function(){return new de}),[]),o=Object(n.useMemo)((function(){return[e.devicesList.filter((function(e){return"videoinput"===e.kind})).map((function(e,t){return{value:e.deviceId,label:e.label?e.label:"Video Input ".concat(t)}})),e.devicesList.filter((function(e){return"audioinput"===e.kind})).map((function(e,t){return{value:e.deviceId,label:e.label?e.label:"Audio Input ".concat(t)}}))]}),[e.devicesList]),c=Object(u.a)(o,2),r=c[0],i=c[1];return Object(n.useEffect)((function(){if(!(r.length>0||i.length>0))return a.getDevices().then((function(e){t.setDevicesList(e)})),function(){a.destroy()}}),[i,t,r,a]),Object(n.useEffect)((function(){!r[0]||!i[0]||e.config.cameraId&&e.config.microphoneId||(t.updateConfig({cameraId:r[0].value,microphoneId:i[0].value}),t.stopLoading())}),[t,e.devicesList,e.config,r,i]),[r,i]}(),r=Object(u.a)(c,2),i=r[0],l=r[1];return o.a.createElement(H.a,{flex:"1",display:"flex",flexDirection:"column"},o.a.createElement(K.b,{to:"/",className:"back-btn"}),o.a.createElement(H.a,{display:"flex",flex:"1",flexDirection:"column",padding:"0 1rem",justifyContent:"flex-start"},o.a.createElement(G.a,{className:e.menu},o.a.createElement("span",{className:e.menuTitle},"Setting")),o.a.createElement("div",{className:e.line}),o.a.createElement(G.a,null,o.a.createElement(q.a,{htmlFor:"resolution"},"Resolution"),o.a.createElement(fe.a,{value:t.config.resolution,onChange:function(e){a.updateConfig({resolution:e.target.value})},inputProps:{name:"resolution",id:"resolution"}},o.a.createElement(he.a,{value:"480p"},"480p"),o.a.createElement(he.a,{value:"720p"},"720p"),o.a.createElement(he.a,{value:"1080p"},"1080p"))),o.a.createElement(G.a,null,o.a.createElement(q.a,{htmlFor:"codec"},"Video Codec"),o.a.createElement(fe.a,{value:t.codec,onChange:function(e){a.setCodec(e.target.value)},inputProps:{name:"codec",id:"codec"}},o.a.createElement(he.a,{value:"h264"},"h264"),o.a.createElement(he.a,{value:"vp8"},"vp8"))),o.a.createElement(G.a,null,o.a.createElement(q.a,{htmlFor:"camera"},"Camera"),o.a.createElement(fe.a,{value:t.config.cameraId,onChange:function(e){a.updateConfig({cameraId:e.target.value})},inputProps:{name:"camera",id:"camera"}},i.map((function(e,t){return o.a.createElement(he.a,{key:t,value:e.value},e.label)})))),o.a.createElement(G.a,null,o.a.createElement(q.a,{htmlFor:"Microphone"},"Microphone"),o.a.createElement(fe.a,{value:t.config.microphoneId,onChange:function(e){a.updateConfig({microphoneId:e.target.value})},inputProps:{name:"microphone",id:"microphone"}},l.map((function(e,t){return o.a.createElement(he.a,{key:t,value:e.value},e.label)})))),o.a.createElement(G.a,null,o.a.createElement(pe.a,{control:o.a.createElement(be,{checked:t.muteVideo,onChange:function(){a.setVideo(!t.muteVideo)},value:t.muteVideo,color:"primary"}),className:e.switchItem,label:"Video"}),o.a.createElement("div",{className:e.hr})),o.a.createElement(G.a,null,o.a.createElement(pe.a,{control:o.a.createElement(be,{checked:t.muteAudio,onChange:function(){a.setAudio(!t.muteAudio)},value:t.muteAudio,color:"primary"}),className:e.switchItem,label:"Audio"}),o.a.createElement("div",{className:e.hr}))))}var Se=Object(w.a)((function(e){return{fontStyle:{color:"#9ee2ff",margin:"5px auto"},fontStyle_a:{color:"#9ee2ff",textDecoration:"none","&:hover":{color:"#fff",textDecoration:"underline"}},midItem:{marginTop:"1rem",marginBottom:"4rem"},item:{flex:1,display:"flex",alignItems:"center"},coverLeft:{background:"linear-gradient(to bottom, #307AFF, 50%, #46cdff)",alignItems:"center",flex:1,display:"flex",flexDirection:"column"},coverContent:{display:"flex",justifyContent:"center",flexDirection:"column",color:"#fff",position:"relative"},coverRight:{position:"relative",flex:1,display:"flex"},container:{display:"flex",justifyContent:"center",alignItems:"center"},card:{display:"flex",minWidth:700,minHeight:500,maxHeight:500,borderRadius:"10px",boxShadow:"0px 6px 18px 0px rgba(0,0,0,0.2)"},input:{maxWidth:"250px",minWidth:"250px",alignSelf:"center"},button:{height:"44px",width:"260px","&:hover":{backgroundColor:"#307AFF"},margin:e.spacing(1),marginTop:"33px",backgroundColor:"#44a2fc",borderRadius:"30px"}}}));function Ee(){var e=Se();return o.a.createElement(H.a,{display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(U.a,{className:e.card},o.a.createElement(H.a,{display:"flex",flex:"1"},o.a.createElement("div",{className:e.coverLeft},o.a.createElement("div",{className:e.item},o.a.createElement("div",{className:"cover-image"})),o.a.createElement("div",{className:e.item},o.a.createElement("div",{className:e.coverContent},o.a.createElement(H.a,{textAlign:"center",fontSize:"h6.fontSize",className:e.fontStyle}),o.a.createElement(H.a,{textAlign:"center",fontWeight:"fontWeightRegular",fontSize:"h4.fontSize",className:e.midItem},"High Performance Video Chat"),o.a.createElement(H.a,{textAlign:"center",fontWeight:"fontWeightRegular",className:e.fontStyle,fontSize:"h7.fontSize"},"Powered by"," ",o.a.createElement("a",{href:"https://acta.ai/",textAlign:"center",fontWeight:"fontWeightRegular",className:e.fontStyle_a,fontSize:"h7.fontSize",target:"_blank"},"ACTA.AI")),o.a.createElement(H.a,{textAlign:"center",fontWeight:"fontWeightRegular",className:e.fontStyle,fontSize:"h7.fontSize"},"Contact:"," ",o.a.createElement("a",{href:"mailto:sarma.bkp@acta.ai",textAlign:"center",fontWeight:"fontWeightRegular",className:e.fontStyle_a,fontSize:"h7.fontSize",target:"_blank"},"sarma.bkp@acta.ai"))))),o.a.createElement("div",{className:e.coverRight},o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:ie}),o.a.createElement(i.a,{path:"/setting",component:ye}))))))}var xe=Object(w.a)((function(){return{container:{height:"100%",width:"100%",minWidth:800,minHeight:600,boxSizing:"content-box",display:"flex",justifyContent:"center"}}})),je=function(){var e=W(),t=M(),a=xe();return Object(n.useEffect)((function(){!0===e.loading&&t.stopLoading()}),[e.loading,t]),o.a.createElement($.a,{maxWidth:"sm",className:a.container},o.a.createElement(Ee,null))};var Oe=a(168);function Ce(e){var t=e.stream,a=e.domId,c=e.uid,r=Object(n.useState)(!1),i=Object(u.a)(r,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)({accessDelay:0,fps:0,resolution:0}),g=Object(u.a)(h,2),v=g[0],b=g[1],y=Object(n.useMemo)((function(){return v}),[v]);Object(n.useEffect)((function(){var a=setInterval((function(){t.getStats((function(t){var a=e.local?t.videoSendResolutionWidth:t.videoReceiveResolutionWidth,n=e.local?t.videoSendResolutionHeight:t.videoReceiveResolutionHeight,o=e.local?t.videoSendFrameRate:t.videoReceiveFrameRate;b({accessDelay:"".concat(t.accessDelay?t.accessDelay:0),resolution:"".concat(a,"x").concat(n),fps:"".concat(o||0)})}))}),500);return function(){clearInterval(a)}}),[e.local,t]);var S=o.a.useRef(!1);return Object(n.useEffect)((function(){if(t&&!t.isPlaying())return S.current=!0,t.play(a,{fit:"cover"},(function(e){e&&"aborted"!==e.status&&(console.log("stream-player play failed ",a),p(!0)),S.current=!1})),function(){t.isPlaying()&&t.stop()}}),[t,a]),o.a.createElement("div",{className:"stream-player ".concat(f?"autoplay":""),id:a,onClick:function(){f&&!l&&(t.resume(),s(!0))},onDoubleClick:function(a){a.stopPropagation(),e.onDoubleClick(t)}},e.children,e.showProfile?o.a.createElement("div",{className:e.className},o.a.createElement("span",null,"SD-RTN delay: ",y.accessDelay,"ms"),o.a.createElement("span",null,"Video: ",y.fps,"fps ",y.resolution)):null,e.showUid&&c?o.a.createElement(Oe.a,{title:"Double Click to expand",arrow:!0},o.a.createElement("div",{className:"stream-uid"},c)):null)}var ke=Object(w.a)({menu:{height:"150px",display:"flex",justifyContent:"center",alignItems:"center"},customBtn:{width:"50px",height:"50px",marginLeft:"20px",borderRadius:"26px",backgroundColor:"rgba(0, 0, 0, 0.4)",backgroundSize:"50px",cursor:"pointer"},leftAlign:{display:"flex",flex:"1",justifyContent:"space-evenly"},rightAlign:{display:"flex",flex:"1",justifyContent:"center"},menuContainer:{width:"100%",height:"100%",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"flex-end",zIndex:"2"}}),Ne=o.a.memo((function(){var e=ke(),t=ee(),a=W(),c=M(),r=Object(n.useMemo)((function(){var e=new de;return e._created||(e.createClient({codec:a.codec,mode:a.mode}),e._created=!0),e}),[a.codec,a.mode]),i=function(e){var t=W(),a=M(),o=[t.localStream,t.currentStream],c=o[0],r=o[1],i=Object(n.useMemo)((function(){return t.streams.filter((function(e){return e.getId()!==r.getId()}))}),[t,r]);return Object(n.useEffect)((function(){e&&!1===e._subscribed&&(e.on("connection-state-change",a.connectionStateChanged),e.on("localStream-added",a.addLocal),e.on("stream-published",a.addStream),e.on("stream-added",(function(t){var n=t.stream;e.subscribe(n,(function(e){a.toastError("stream ".concat(t.stream.getId()," subscribe failed: ").concat(e))}))})),e.on("stream-removed",a.removeStream),e.on("peer-leave",a.removeStreamById),e.on("stream-subscribed",(function(t){e.setStreamFallbackOption(t.stream,2),a.addStream(t)})),e._subscribed=!0)}),[e,a]),Object(n.useEffect)((function(){e&&!0===e._subscribed&&null!=r&&(e.setRemoteVideoStreamType(r,0),i.forEach((function(t){e.setRemoteVideoStreamType(t,1)})))}),[e,r,i]),[c,r,i]}(r),l=Object(u.a)(i,2),s=l[0],m=l[1],d=Object(n.useState)(a.muteVideo),f=Object(u.a)(d,2),h=f[0],g=f[1],v=Object(n.useState)(a.muteAudio),b=Object(u.a)(v,2),y=b[0],S=b[1],E=Object(n.useMemo)((function(){return{token:a.config.token,channel:a.config.channelName,microphoneId:a.config.microphoneId,cameraId:a.config.cameraId,resolution:a.config.resolution,muteVideo:h,muteAudio:y,uid:a.uid,host:a.config.host,userName:a.config.userName,eeee:"eeeeeeee"}}),[a,h,y]);Object(n.useEffect)((function(){return function(){r&&r.leave((function(){return c.clearAllStream()}))}}),[r]);var x=t.history,j=new URLSearchParams(window.location.search);Object(n.useEffect)((function(){var e=j.get("role");E.channel||"audience"===e||x.push("/")}),[E.channel,x,j]),Object(n.useEffect)((function(){console.log(E),E.channel&&r._created&&!1===r._joined&&r.join(E).then((function(e){E.host&&(r.publish(),setTimeout((function(){alert("Your call will be disconnected after 5 minutes, Click ok to continue")}),21e5),setTimeout((function(){r.leave().then((function(){c.clearAllStream(),t.history.push("/")}))}),24e5)),c.updateConfig({uid:e}),c.stopLoading()})).catch((function(e){c.toastError("Media ".concat(e.info)),t.history.push("/")}))}),[r,c,E,t]);var O=function(e){return function(n){switch(n.stopPropagation(),e){case"video":h?s.muteVideo():s.unmuteVideo(),g(!h);break;case"audio":y?s.muteAudio():s.unmuteAudio(),S(!y);break;case"screen":a.screen?r.createRTCStream({token:null,channel:a.config.channelName,microphoneId:a.config.microphoneId,resolution:a.config.resolution,muteVideo:h,muteAudio:y,username:a.config.userName}).then((function(){console.log(r),r.publish(),c.setScreen(!1)})).catch((function(e){console.log(e),c.toastError("Media ".concat(e.info)),t.history.push("/")})):r.createScreenSharingStream({token:null,channel:a.config.channelName,microphoneId:a.config.microphoneId,cameraId:a.config.cameraId,resolution:a.config.resolution}).then((function(){r.publish(),c.setScreen(!0)})).catch((function(e){console.log(e),c.toastError("Media ".concat(e.info))}));break;case"profile":break;default:throw new Error("Unknown click handler, name: ".concat(e))}}},C=function(e){c.setCurrentStream(e)};Object(n.useMemo)((function(){return a.streams.filter((function(e){return e.getId()!==m.getId()}))}),[a.streams,m]);return o.a.createElement("div",{className:"meeting"},o.a.createElement("div",{className:"current-view"},o.a.createElement("div",{className:"nav"},o.a.createElement("div",{className:"avatar-container"},o.a.createElement("div",{className:"default-avatar"}),o.a.createElement("div",{className:"avatar-text"},"Standup Meet"))),m?o.a.createElement(Ce,{className:"main-stream-profile",showProfile:a.profile,local:!!E.host&&(m&&s&&m.getId()===s.getId()),stream:m,onDoubleClick:C,uid:m.getId(),domId:"stream-player-".concat(m.getId())},o.a.createElement("div",{className:e.menuContainer},E.host&&o.a.createElement("div",{className:e.menu},o.a.createElement(Oe.a,{title:h?"mute-video":"unmute-video"},o.a.createElement("i",{onClick:O("video"),className:Object(p.a)(e.customBtn,h?"mute-video":"unmute-video")})),o.a.createElement(Oe.a,{title:y?"mute-audio":"unmute-audio"},o.a.createElement("i",{onClick:O("audio"),className:Object(p.a)(e.customBtn,y?"mute-audio":"unmute-audio")})),o.a.createElement(Oe.a,{title:a.screen?"stop-screen-share":"start-screen-share"},o.a.createElement("i",{onClick:O("screen"),className:Object(p.a)(e.customBtn,a.screen?"start-screen-share":"stop-screen-share")})),o.a.createElement(Oe.a,{title:"quit"},o.a.createElement("div",{className:Object(p.a)(e.customBtn,"quit"),onClick:function(){r.leave().then((function(){c.clearAllStream(),t.history.push("/")}))}}))))):null,o.a.createElement("div",{className:"stream-container"},console.log(a),a.otherStreams.map((function(e,t){return o.a.createElement(Ce,{className:"stream-profile",showProfile:a.profile,local:!!E.host&&(e.getId()===s&&s.getId()),key:"".concat(t).concat(e.getId()),stream:e,isPlaying:e.isPlaying(),uid:e.getId(),domId:"stream-player-".concat(e.getId()),onDoubleClick:C,showUid:!0})})))))}));var _e=function(){return o.a.createElement(Q,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/meeting/:name",component:Ne}),o.a.createElement(i.a,{path:"/",component:je})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=a(164),we=a(88),Ae=Object(we.a)({typography:{fontFamily:'-apple-system, BlinkMacSystemFont, \\"Segoe UI\\", \\"Roboto\\", \\"Oxygen\\", \\"Ubuntu\\", \\"Cantarell\\", \\"Fira Sans\\", \\"Droid Sans\\", \\"Helvetica Neue\\", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,color:"#333"},overrides:{MuiFormControl:{root:{margin:"0.3rem 0"}},MuiInput:{underline:{"&:before":{borderBottom:"1px solid #EAEAEA"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid #EAEAEA"},"&$focused":{"&:after":{borderBottom:"2px solid #44a2fc"}}}}}});r.a.render(o.a.createElement(Ie.a,{theme:Ae},o.a.createElement(z,null,o.a.createElement(_e,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[102,1,2]]]);
//# sourceMappingURL=main.8d28d6f8.chunk.js.map